<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
 

<script>
  document.addEventListener('DOMContentLoaded', async () => {
    const urlParams = new URLSearchParams(window.location.search);
    const courseId = urlParams.get('course_id');
    const videoId = urlParams.get('video_id');
    const statusElement = document.getElementById('status');

    // Validate if course_id and video_id exist in the query string
    if (!courseId || !videoId) {
      statusElement.textContent = 'Error: Missing course_id or video_id in the URL.';
      return;
    }

    // API URL
    const apiUrl = `https://rgvikramjeetapi.akamai.net.in/get/fetchVideoDetailsById?course_id=${courseId}&video_id=${videoId}&ytflag=0&folder_wise_course=0`;

    try {
      // Fetch API Request
      const response = await fetch(apiUrl, {
        method: 'GET',
        headers: {
          'authorization': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6IjEyMDkyMzAiLCJlbWFpbCI6InJhZGk4MzQ0MEBnbWFpbC5jb20iLCJ0aW1lc3RhbXAiOjE3Mzc2NDk4MTcsInRlbmFudFR5cGUiOiJ1c2VyIiwidGVuYW50TmFtZSI6IiIsInRlbmFudElkIjoiIiwiZGlzcG9zYWJsZSI6ZmFsc2V9.rYg-PSY_44WCNcEmMiZlmD5vlF0FzpPlBi5XZx_P5Rw',
          'device-type': '',
          'sec-ch-ua': '"Google Chrome";v="131", "Chromium";v="131", "Not_A Brand";v="24"',
          'sec-ch-ua-mobile': '?0',
          'auth-key': 'appxapi',
          'source': 'website',
          'user-id': '1209230',
          'client-service': 'Appx',
          'origin': 'https://rankersgurukul.com',
          'sec-fetch-site': 'cross-site',
          'sec-fetch-mode': 'cors',
          'sec-fetch-dest': 'empty',
          'referer': 'https://rankersgurukul.com/',
          'accept-language': 'en-US,en;q=0.9',
          'priority': 'u=1, i'
        }
      });

      if (!response.ok) {
        throw new Error(`Error: ${response.statusText}`);
      }

      const result = await response.json();

      // Ensure 'data' exists in the response
      if (result.status === 200 && result.data) {
        const videoPlayerToken = result.data.video_player_token;
        const videoPlayerBaseUrl = result.data.video_player_url;

        if (videoPlayerToken && videoPlayerBaseUrl) {
          // Construct the full player URL
          const playerUrl = `${videoPlayerBaseUrl}${videoPlayerToken}`;
          window.location.href = playerUrl; // Redirect to the video player URL in the same tab
        } else {
          statusElement.textContent = 'Error: Missing video player token or URL in the response.';
        }
      } else {
        statusElement.textContent = `Error: ${result.message || 'Invalid response from the server.'}`;
      }
    } catch (error) {
      statusElement.textContent = `Error: ${error.message}`;
    }
  });
</script>

 
</body>
</html>